<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link href="Public/Home/images/logo.ico" type="image/x-icon" rel="shortcut icon" />
	<link href="__PLU__/form/skins/form_default.css" rel="stylesheet" type="text/css" />
	<link href="__PLU__/datatable/skins/datatable_default.css" rel="stylesheet" type="text/css" />
	<link href="__PLU__/form/skins/form_default.css" rel="stylesheet" type="text/css" />
	<link href="__PLU__/infoDetail/skins/infoDetail_default.css" rel="stylesheet" type="text/css" />
	<link href="__PLU__/annex/skins/annex_default.css" rel="stylesheet" type="text/css" />
	<link href="__CSS__/css.css" type="text/css" rel="stylesheet" />
	<title>{$title}|{:C('WEB_SITE')}</title>
	<script type="text/javascript" src="__JS__/jquery-1.6.min.js"></script>
	<script type="text/javascript" src="__JS__/main.js"></script>
	<script type="text/javascript" src="__PLU__/dialog/artDialog.js?skin=default"></script>
	<script type="text/javascript" src="__PLU__/dialog/iframeTools.js"></script>
	<script src="__JS__/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="__STATIC__/layer/laydate/laydate.js"></script>
	<script type="text/javascript" src="__STATIC__/layer/layecore/layer.min.js"></script>
	<script type="text/javascript" src="__STATIC__/layer/layecore/extend/layer.ext.js"></script>
	<script src="__JS__/newjs/check.js" type="text/javascript"></script>
	<script src="__JS__/common.js" type="text/javascript"></script>
	<style>
		.changBtn {
			min-width: 30px;
			_width: 30px;
			padding: 0 10px;
			height: 28px;
			line-height: 25px;
			text-align: center;
			outline: 0;
			cursor: pointer;
			color: #555;
			font-size: 16px;
			border: 0;
			background: #dce7e9;
			border-radius: 3px;
		}

		.changBtn:hover {
			background: #c0dadf;
		}
	</style>
</head>

<body>
	<!-- 头部 begin-->
	<div class="head">
		<div class="logo"></div>
		<div class="nav" style="height:10px;"></div>
	</div>
	<!-- 头部 end -->
	<div class="mainbody" style="padding:10px;padding-bottom:30px;">
		<div id="leftcontent">
			<!--右侧内容-->
			<div class="bod bgf h782">
				<div class="formPage" style="width:100%;">
					<form action="{:U('freeReg')}" method="post">
						<input type="hidden" name="regcode" value="{$regcode}" />
						<div class="formbg">
							<div class="big_title">{$title}</div>
							<div class="content_form">
								<table width="100%" class="inputTable">
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>用户编号：</label>
										</th>
										<td>
											<input class="formText" type="text" name="usernumber" id="usernumber" value="" />
											<span id='usernumbererr'></span>
										</td>
										<th>
											<input type="button" onclick="checkusernum();" value="验证用户" class="changBtn" />
										</th>
										<td>
											<span id="backinfo" style="color:#b50000 margin-left:10px; display:inline;"></span>
										</td>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>用户姓名：</label>
										</th>
										<td>
											<input class="formText" type="text" name="realname" id="realname" value="" maxlength="16" />
											<span id='realnameerr'></span>
										</td>
										<th>
											<em class="requireField">*</em>
											<label>身份证号：</label>
										</th>
										<td>
											<input class="formText" type="text" name="IDcard" id="IDcard" value='' />
											<span id='IDcarderr'></span>
										</td>
									</tr>
									<tr>
										<th>
											<label>用户姓别：</label>
										</th>
										<td>
											<input type="radio" name="sex" value='0' />男&nbsp;&nbsp;
											<input type="radio" name="sex" value='1' />女
										</td>
										<th>
											<label>出生日期：</label>
										</th>
										<td>
											<input class="formText" type="text" id="borth" readonly="readonly" name="borth" value="{$time|date='Y-m-d',###}" />
										</td>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>邮箱：</label>
										</th>
										<td>
											<input class="formText" type="text" name="email" id="email" value='' />
											<span id='emailerr'></span>
										</td>
										<th>
											<em class="requireField">*</em>
											<label>手机号：</label>
										</th>
										<td>
											<input class="formText" type="text" name="mobile" id="mobile" value="" maxlength="11" />
											<span id='mobileerr'></span>
										</td>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>QQ号：</label>
										</th>
										<td>
											<input class="formText" type="text" name="qq" id="qq" value="" maxlength="11" />
											<span id='qqerr'></span>
										</td>
										<th>
											<em class="requireField">*</em>
											<label>银行卡号：</label>
										</th>
										<td>
											<input class="formText" type="text" name="banknumber" id="banknumber" value="" maxlength="20" />
											<span id='banknumbererr'></span>
										</td>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>银行名称：</label>
										</th>
										<td>
											<input class="formText" type="text" name="bankname" id="bankname" value='' />
											<input type="button" onclick="getbankname();" value="获取名称" class="formButton_green" />
											<span id='banknameerr'></span>
										</td>
										<th>
											<em class="requireField">*</em>
											<label>开户人姓名：</label>
										</th>
										<td>
											<input class="formText" type="text" name="bankholder" id="bankholder" value="" maxlength="11" />
											<span id='bankholdererr'></span>
										</td>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>推荐人编号：</label>
										</th>
										<td>
											<input readonly class="formText" type="text" name="tuijiannumber" value="{$userinfo['tuijiannumber']}" />
										</td>
										<th>
											<em class="requireField">*</em>
											<label>接点人：</label>
										</th>
										<td>
											<input readonly class="formText" type="text" name="parentnumber" value="{$userinfo['parentnumber']}" />
										</td>
									</tr>
									<tr>
										<th style="text-align:left" colspan="4">密码设置</th>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>一级密码：</label>
										</th>
										<td>
											<input class="formText" type="password" name="password1" id="password1" value="" />
											<span id='password1err'></span>
										</td>
										<th>
											<em class="requireField">*</em>
											<label>确认一级密码：</label>
										</th>
										<td>
											<input class="formText" type="password" name="repassword1" id="repassword1" value="" />
											<span id='repassword1err'></span>
										</td>
									</tr>
									<tr>
										<th>
											<em class="requireField">*</em>
											<label>二级密码：</label>
										</th>
										<td>
											<input class="formText" type="password" name="password2" id="password2" value="" />
											<span id='password2err'></span>
										</td>
										<th>
											<em class="requireField">*</em>
											<label>确认二级密码：</label>
										</th>
										<td>
											<input class="formText" type="password" name="repassword2" id="repassword2" value="" />
											<span id='repassword2err'></span>
										</td>
									</tr>
								</table>
							</div>
						</div>
						<div class="buttonArea">
							<button class="formButton_green" id="submit" type="submit">注册</button>
							<button class="formButton_grey" type="reset">重置</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- 底部 begin-->
	<div id="footer">
		<span>{:C('WEB_INFO')}</span>
	</div>
	<!-- 底部 end -->
	<script type="text/javascript">
		$('#set').click(function () {
			$("input[type='password']").val('');
		});

		/*验证用户编号*/
		$("#usernumber").blur(function () {
			if (!check_empty('usernumber', '用户编号', 'usernumbererr')) {
				return false;
			} else {
				check_Ok('usernumbererr');
			}
		});

		/*真实姓名*/
		$("#nickname").blur(function () {
			if (!check_empty('nickname', '用户编号', 'nicknameerr')) {
				return false;
			} else {
				check_Ok('nicknameerr');
			}
		});
		/*身份证号*/
		$("#IDcard").blur(function () {
			if (!check_empty('IDcard', '身份证号', 'IDcarderr')) {
				return false;
			}
			if (!check_card('IDcard', '身份证号', 'IDcarderr')) {
				return false;
			} else {
				check_Ok('IDcarderr');
			}
		});
		/*QQ号*/
		$("#qq").blur(function () {
			if (!check_empty('qq', '用户编号', 'qqerr')) {
				return false;
			}
			if (!check_number('qq', 'QQ号', 'qqerr')) {
				return false;
			} else {
				check_Ok('qqerr');
			}
		});

		/*手机号*/
		$("#mobile").blur(function () {
			if (!check_empty('mobile', '手机号', 'mobileerr')) {
				return false;
			}
			if (!check_phone('mobile', '手机号', 'mobileerr')) {
				return false;
			} else {
				check_Ok('mobileerr');
			}
		});

		/*邮箱*/
		$("#email").blur(function () {
			if (!check_empty('email', '邮箱', 'emailerr')) {
				return false;
			}
			if (!check_Mail('email', '邮箱', 'emailerr')) {
				return false;
			} else {
				check_Ok('emailerr');
			}
		});
		/*银行卡号*/
		$("#banknumber").blur(function () {
			if (!check_empty('banknumber', '银行卡号', 'banknumbererr')) {
				return false;
			}
			if (!check_number('banknumber', '银行卡号', 'banknumbererr')) {
				return false;
			} else {
				check_Ok('banknumbererr');
			}
		});
		/*银行名称*/
		$("#bankname").blur(function () {
			if (!check_empty('bankname', '以后名称', 'banknameerr')) {
				return false;
			} else {
				check_Ok('banknameerr');
			}
		});
		/*开户人*/
		$("#bankholder").blur(function () {
			if (!check_empty('bankholder', '开户人', 'bankholdererr')) {
				return false;
			} else {
				check_Ok('bankholdererr');
			}
		});

		/*一级密码*/
		$("#password1").blur(function () {
			if (!check_empty('password1', '一级密码', 'password1err')) {
				return false;
			}
			if (!check_Size('password1', '一级密码', '6', '30', 'password1err')) {
				return false;
			} else {
				check_Ok('password1err');
			}
		});
		/*重复一级密码*/
		$("#repassword1").blur(function () {
			if (!check_empty('repassword1', '一级密码', 'repassword1err')) {
				return false;
			}
			if (!check_Same('password1', '一级密码', 'repassword1', '重复一级密码', 'repassword1err')) {
				return false;
			} else {
				check_Ok('repassword1err');
			}


		});

		/*二级密码*/
		$("#password2").blur(function () {
			if (!check_empty('password2', '二级密码', 'password2err')) {
				return false;
			}
			if (!check_Size('password2', '二级密码', '6', '30', 'password2err')) {
				return false;
			} else {
				check_Ok('password2err');
			}
		});
		/*重复二级密码*/
		$("#repassword2").blur(function () {
			if (!check_empty('repassword2', '一级密码', 'repassword2err')) {
				return false;
			}
			if (!check_Same('password2', '二级密码', 'repassword2', '重复二级密码', 'repassword2err')) {
				return false;
			} else {
				check_Ok('repassword2err');
			}
		});


		/*存在错误信息禁止提交*/
		$("form").submit(function () {
			if (!check_empty('usernumber', '用户编号', 'usernumbererr')) {
				return false;
			}
			if (!check_empty('nickname', '用户姓名', 'nicknameerr')) {
				return false;
			}
			if (!check_empty('IDcard', '身份证号', 'IDcarderr')) {
				return false;
			}
			if (!check_card('IDcard', '身份证号', 'IDcarderr')) {
				return false;
			}
			if (!check_empty('qq', '用户编号', 'qqerr')) {
				return false;
			}
			if (!check_number('qq', 'QQ号', 'qqerr')) {
				return false;
			}
			if (!check_empty('mobile', '手机号', 'mobileerr')) {
				return false;
			}
			if (!check_phone('mobile', '手机号', 'mobileerr')) {
				return false;
			}
			if (!check_empty('email', '邮箱', 'emailerr')) {
				return false;
			}
			if (!check_Mail('email', '邮箱', 'emailerr')) {
				return false;
			}
			if (!check_empty('banknumber', '银行卡号', 'banknumbererr')) {
				return false;
			}
			if (!check_number('banknumber', '银行卡号', 'banknumbererr')) {
				return false;
			}
			if (!check_empty('bankname', '以后名称', 'banknameerr')) {
				return false;
			}
			if (!check_empty('bankholder', '开户人', 'bankholdererr')) {
				return false;
			}
			if (!check_empty('password1', '一级密码', 'password1err')) {
				return false;
			}
			if (!check_Size('password1', '一级密码', '6', '30', 'password1err')) {
				return false;
			}
			if (!check_empty('repassword1', '一级密码', 'repassword1err')) {
				return false;
			}
			if (!check_Same('password1', '一级密码', 'repassword1', '重复一级密码', 'repassword1err')) {
				return false;
			}
			if (!check_empty('password2', '二级密码', 'password2err')) {
				return false;
			}
			if (!check_Size('password2', '二级密码', '6', '30', 'password2err')) {
				return false;
			}
			if (!check_empty('repassword2', '一级密码', 'repassword2err')) {
				return false;
			}
			if (!check_Same('password2', '二级密码', 'repassword2', '重复二级密码', 'repassword2err')) {
				return false;
			}

			/* var self = $(this);
			$.post(self.attr("action"),self.serialize(),success, "json");
			 return false; */
		})
	</script>
	<script type="text/javascript">
		function getbankname() {
			card = $("#banknumber").val();
			$("#bankname").val('');
			if (card == '') {
				layer.alert('请输入银行卡号');
			} else {
				$.ajax({
					url: "__MODULE__/User/getbankname",
					type: "post",
					data: {
						card: card
					},
					success: function (da) {
						if (da == -1) {
							layer.alert('无法获取该卡号相关银行信息，请输入常用银行');
							return false;
						} else if (da == -2) {
							layer.alert('银行卡格式不正确');
							return false;
						} else {
							$("#bankname").val(da);
							$("#banknumber").attr('readonly', 'readonly');
						}

					}
				});
			}
		}

		function checkusernum() {
			usernumval = $("#usernumber").val(),
				//alert(usernumval);
				$.ajax({
					url: "{:U('User/checkusernum')}",
					type: "post",
					data: {
						usernum: usernumval
					},
					success: function (da) {
						$("#backinfo").css("width", "140px");
						if (da == 1) {
							$("#backinfo").html("该编号己存在！");
							$("#backinfo").css("color", "#800");
							$("#backinfo").show();
						} else {
							$("#backinfo").html("该编号可用！");
							$("#backinfo").css("color", "#080");
							$("#backinfo").show();
						}
					}
				})
		}
	</script>

	<script type="text/javascript">
		laydate({
			elem: '#borth',
			event: 'focus',
		});
	</script>

</body>

</html>